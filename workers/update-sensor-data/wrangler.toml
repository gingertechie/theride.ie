name = "update-sensor-data"
main = "index.ts"
compatibility_date = "2024-11-28"

# Schedule: Run hourly between midnight and 4am to process sensor batches
# Cron format: minute hour day month day-of-week
# 5 batches run at 00:00, 01:00, 02:00, 03:00, 04:00 UTC
[triggers]
crons = ["0 0,1,2,3,4 * * *"]

# D1 Database binding (same database as main app)
[[d1_databases]]
binding = "DB"
database_name = "theride-db"
database_id = "86c35cca-68fd-4d93-8d4a-c7a3ab463b10"

# Telraam API Key (set via: wrangler secret put TELRAAM_API_KEY)
# This will be stored securely in Cloudflare and not in the code

# Observability: Enable logging for monitoring and debugging
[observability]
enabled = true

[observability.logs]
enabled = true
head_sampling_rate = 1
invocation_logs = true
