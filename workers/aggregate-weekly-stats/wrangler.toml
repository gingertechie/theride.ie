name = "aggregate-weekly-stats"
type = "service"
main = "index.ts"
compatibility_date = "2026-02-07"

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "theride-db"
database_id = "86c35cca-68fd-4d93-8d4a-c7a3ab463b10"

[env.production]
routes = [
  { pattern = "example.com/aggregate-weekly-stats", zone_name = "example.com" }
]

[triggers]
crons = ["0 3 * * Sun"] # Sunday 3:00 AM UTC
